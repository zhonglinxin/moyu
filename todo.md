# 摸鱼特工 - 开发任务清单 v2.0

> 最后更新: 2025-08-10
> 状态说明: ⏳ 待办 | 🚧 进行中 | ✅ 完成
> 基于新的模块化架构重新设计

## 项目概览
- **架构模式**: 模块化分层架构
- **开发方法**: 迭代式开发，每阶段可独立测试
- **目标**: 构建可扩展、易维护的游戏框架

## 开发阶段

### 第一阶段：基础架构搭建
- [ ] ⏳ 1.1 Phaser包装组件（处理SSR问题）
- [ ] ⏳ 1.2 GameManager（游戏总控）
- [ ] ⏳ 1.3 SceneManager（场景切换）
- [ ] ⏳ 1.4 EventBus（事件通信）
- [ ] ⏳ 1.5 配置系统设计

### 第二阶段：场景系统
- [ ] ⏳ 2.1 场景基类设计
- [ ] ⏳ 2.2 PreloadScene（资源预加载）
- [ ] ⏳ 2.3 MainMenuScene（主菜单）
- [ ] ⏳ 2.4 GameplayScene（游戏主场景骨架）

### 第三阶段：地图与环境
- [ ] ⏳ 3.1 办公室布局生成
- [ ] ⏳ 3.2 工位配置系统
- [ ] ⏳ 3.3 地图JSON配置
- [ ] ⏳ 3.4 碰撞边界设置

### 第四阶段：玩家系统
- [ ] ⏳ 4.1 玩家实体类
- [ ] ⏳ 4.2 玩家控制系统
- [ ] ⏳ 4.3 状态机实现
- [ ] ⏳ 4.4 动画反馈

### 第五阶段：时间与进度系统
- [ ] ⏳ 5.1 5分钟倒计时系统
- [ ] ⏳ 5.2 游戏时间映射（9:00-19:00）
- [ ] ⏳ 5.3 工作进度条（30秒累计）
- [ ] ⏳ 5.4 摸鱼进度条（点击累积）

### 第六阶段：摸鱼小游戏
- [ ] ⏳ 6.1 快速点击机制
- [ ] ⏳ 6.2 随机点数生成
- [ ] ⏳ 6.3 100点兑换金币
- [ ] ⏳ 6.4 金币动画效果

### 第七阶段：AI巡查员系统
- [ ] ⏳ 7.1 巡查员基类（组长/主管/总监/Boss）
- [ ] ⏳ 7.2 巡逻路径系统
- [ ] ⏳ 7.3 视野锥渲染
- [ ] ⏳ 7.4 视野碰撞检测
- [ ] ⏳ 7.5 遮挡物判定

### 第八阶段：检测与判定系统
- [ ] ⏳ 8.1 玩家状态检测
- [ ] ⏳ 8.2 被发现逻辑
- [ ] ⏳ 8.3 失败判定（过劳/被抓/金币不足）
- [ ] ⏳ 8.4 通关判定

### 第九阶段：UI界面系统
- [ ] ⏳ 9.1 HUD界面（顶部信息栏）
- [ ] ⏳ 9.2 底部控制区
- [ ] ⏳ 9.3 菜单系统
- [ ] ⏳ 9.4 弹窗系统

### 第十阶段：音效与反馈
- [ ] ⏳ 10.1 背景音乐系统
- [ ] ⏳ 10.2 音效管理
- [ ] ⏳ 10.3 粒子效果
- [ ] ⏳ 10.4 动画反馈

### 第十一阶段：优化与适配
- [ ] ⏳ 11.1 对象池优化
- [ ] ⏳ 11.2 渲染优化
- [ ] ⏳ 11.3 移动端适配
- [ ] ⏳ 11.4 浏览器兼容

## 开发进度
- **总任务数**: 48
- **已完成**: 0
- **进行中**: 0
- **待办**: 48
- **完成率**: 0%

## 里程碑
| 阶段 | 目标 | 包含内容 | 状态 |
|------|------|----------|------|
| MVP | 核心玩法可玩 | 1-6阶段 | ⏳ |
| Alpha | 完整游戏体验 | 7-9阶段 | ⏳ |
| Beta | 优化和打磨 | 10-11阶段 | ⏳ |
| Release | 正式发布 | 全部完成 | ⏳ |

## 技术债务
- 暂无

## 已知问题
- 暂无

## 重点关注
1. **Phaser SSR问题**: 需要特别处理客户端渲染
2. **性能优化**: 视野锥检测需要重点优化
3. **状态管理**: 考虑引入Zustand
4. **资源管理**: 需要设计良好的资源加载策略

## 下一步行动
🎯 开始第一阶段：基础架构搭建
- 创建Phaser包装组件
- 实现核心管理器
- 建立事件系统